require "test/unit"
require "fiscalizer_ruby"

class FeeTest < Test::Unit::TestCase

	def test_initialization
		# Manual build
		fee = Fiscalizer::Fee.new
		fee.name = "My cool new fee"
		fee.value = 234.16
		assert_equal "My cool new fee",	fee.name,	"Fee's name not set"
		assert_equal 234.16,			fee.value,	"Fee's value not set"

		# Automatic build
		fee = Fiscalizer::Fee.new name: "My cool new fee", value: 234.16
		assert_equal "My cool new fee",	fee.name,	"Fee's name not set"
		assert_equal 234.16,			fee.value,	"Fee's value not set"
	end # test_initialization

	def test_math
		# Whole number
		fee = Fiscalizer::Fee.new name: "Test", value: 100
		assert_equal 100, fee.value, "Whole number is wrong"

		# Decimal number
		fee = Fiscalizer::Fee.new name: "Test", value: 13.67
		assert_equal 13.67, fee.value, "Decimal number is wrong"

		# Decimal whole number
		fee = Fiscalizer::Fee.new name: "Test", value: 13.00
		assert_equal 13.00, fee.value, "Decimal whole number is wrong"

		# Rounding down
		fee = Fiscalizer::Fee.new name: "Test", value: 13.674961205
		assert_equal 13.67, fee.value, "Rounding down is wrong"

		# Rounding up
		fee = Fiscalizer::Fee.new name: "Test", value: 13.675961205
		assert_equal 13.68, fee.value, "Rounding down is wrong"
	end # test_math

	def test_string
		# Whole number
		fee = Fiscalizer::Fee.new name: "Test", value: 100
		assert_equal "100.00", fee.value_str, "Whole number string is wrong"

		# Decimal number
		fee = Fiscalizer::Fee.new name: "Test", value: 13.67
		assert_equal "13.67", fee.value_str, "Decimal number string is wrong"

		# Decimal whole number
		fee = Fiscalizer::Fee.new name: "Test", value: 13.00
		assert_equal "13.00", fee.value_str, "Decimal whole number string is wrong"

		# Rounding down
		fee = Fiscalizer::Fee.new name: "Test", value: 13.674961205
		assert_equal "13.67", fee.value_str, "Rounding down string is wrong"

		# Rounding up
		fee = Fiscalizer::Fee.new name: "Test", value: 13.675961205
		assert_equal "13.68", fee.value_str, "Rounding down string is wrong"
	end # test_string

end